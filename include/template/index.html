<!DOCTYPE html>

<html>

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" type="text/css" href="include/libs/materialize/css/materialize.css">
    <link rel="stylesheet" type="text/css" href="assets/css/styleIndex.css">
    <!-- <script src="//localhost:3000/livereload.js"></script> -->

    <title>Loisirs pour tous</title>
  </head>

  <body>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="include/libs/materialize/js/materialize.js"></script>

      <header>
        <figure id="logo" class="row">
          <a href="#"><img class="col m3 push-m1"  src="assets/img/logo.png" alt="logo"/></a>
          <figcaption class="col m7 push-m1">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris placerat vulputate porttitor. Aliquam ut tristique massa. Donec suscipit convallis ante eu mattis. Suspendisse potenti. Nam cursus sit amet mauris at egestas.
          </figcaption>
        </figure>
      </header>

      <main id="homepage">

        <div id="block-search" class="container card-panel white lighten-7">
          <form class="row center-align " id="search" method="get" action="include/getResults.php">

            <input type="text" name="etablissements" class="input-field col m4 push-m1" placeholder="choississez votre musée" list="ListEst"/>
            <datalist id="ListEst">
              {{#eList}}
              <option value="{{Name_Est}}">{{Name_Est}}</option>
              {{/eList}}
            </datalist>
            <button class="btn purple col m1 waves-effect waves-light" type="submit" name="action">Envoyer</button>

            <div id="or" class="col m1">ou</div>

            <input class="input-field col m4 push-m1" type="text" name="city" placeholder="saisissez votre ville" list="ListCity"/>
            <datalist id="ListCity">
              {{#eList}}
              <option value="{{City}}">{{City}}</option>
              {{/eList}}
            </datalist>
            <button class="btn purple col m1 waves-effect waves-light" type="submit" name="envoyer">Envoyer</button>

            <span class="col m6 pull-m3" id="myPosition"></span>
            <input id="Long" type="hidden" name="longitude" >
            <input id="Lat" type="hidden" name="latitude">
          </form>
        </div>
      </main>

      <footer class="row">
          <div id="rs" class="col m3 push-m1">
              <a href="#"><img id="logofb" src="assets/img/logofb.png" alt="logo Facebook"/></a>
              <a href="#"><img id="logotwitter" src="assets/img/logotwitter.png" alt="logo Twitter"/></a>
          </div>
          <div id="link"  class="col m2 push-m6">
              <a href="apropos.html">A propos</a>
              <a href="#">Contact</a>
          </div>
      </footer>

      <script>
      /*--- Récupère la position GPS en live ---*/
          myPosition = document.getElementById("myPosition");

          function getCoords(position) {
            document.getElementById("Long").value = position.coords.longitude;
            document.getElementById("Lat").value = position.coords.latitude;
           }

          function errorMsg(error) {
            msg = {
             1: "Accès à la position non autorisé par le navigateur",
             2: "Position non trouvée",
             3: "Délai expiré"
            }
            myPosition.innerHTML = msg[error.code];
           }

           if (navigator.geolocation)
           {
            navigator.geolocation.getCurrentPosition(getCoords, errorMsg, {enableHighAccuracy:true, timeout:60*1000});
           }
           else
           {
            myPosition.innerHTML = "Géolocalisation non supportée par ce navigateur !";
           }
      </script>

  </body>
</html>
